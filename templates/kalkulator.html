{% extends "base.html" %}

{% block title %}Kalkulator Kebutuhan Benih dan Pupuk Jagung{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h2 class="mb-0 text-center"><i class="fas fa-calculator me-2"></i>Kalkulator Kebutuhan Benih & Pupuk</h2>
            </div>
            <div class="card-body p-4">
                
                <ul class="nav nav-tabs mb-4" id="calculatorTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="seed-tab" data-bs-toggle="tab" data-bs-target="#seed" type="button" role="tab" aria-controls="seed" aria-selected="true">Kebutuhan Benih</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="fertilizer-tab" data-bs-toggle="tab" data-bs-target="#fertilizer" type="button" role="tab" aria-controls="fertilizer" aria-selected="false">Kebutuhan Pupuk</button>
                    </li>
                </ul>
                
                <div class="tab-content" id="calculatorTabContent">
                    <!-- KALKULATOR BENIH -->
                    <div class="tab-pane fade show active" id="seed" role="tabpanel" aria-labelledby="seed-tab">
                        <div class="calculator-section">
                            <h3>Kalkulator Kebutuhan Benih</h3>
                            <p>Hitung kebutuhan benih jagung berdasarkan luas lahan dan jarak tanam yang digunakan.</p>
                            
                            <form id="seedCalculatorForm">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="landArea" class="form-label">Luas Lahan (m²)</label>
                                        <input type="number" class="form-control" id="landArea" min="1" required>
                                        <div class="form-text">Masukkan luas lahan dalam meter persegi</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="landAreaUnit" class="form-label">Satuan Luas</label>
                                        <select class="form-select" id="landAreaUnit">
                                            <option value="m2">Meter Persegi (m²)</option>
                                            <option value="ha">Hektar (ha)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="rowSpacing" class="form-label">Jarak Antar Baris (cm)</label>
                                        <input type="number" class="form-control" id="rowSpacing" min="1" value="75" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="plantSpacing" class="form-label">Jarak Antar Tanaman (cm)</label>
                                        <input type="number" class="form-control" id="plantSpacing" min="1" value="20" required>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="seedsPerHole" class="form-label">Jumlah Benih per Lubang</label>
                                        <input type="number" class="form-control" id="seedsPerHole" min="1" max="5" value="1" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="seedWeight" class="form-label">Berat Rata-rata Benih (gram)</label>
                                        <input type="number" class="form-control" id="seedWeight" min="0.1" step="0.1" value="0.3" required>
                                        <div class="form-text">Berat rata-rata per biji jagung</div>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-success" id="calculateSeedBtn">
                                        <i class="fas fa-calculator me-2"></i>Hitung Kebutuhan Benih
                                    </button>
                                </div>
                            </form>
                            
                            <div class="result-card" id="seedResult">
                                <h4>Hasil Perhitungan Kebutuhan Benih</h4>
                                <table class="table result-table">
                                    <tbody>
                                        <tr>
                                            <th>Luas Lahan</th>
                                            <td id="resultLandArea">-</td>
                                        </tr>
                                        <tr>
                                            <th>Jarak Tanam</th>
                                            <td id="resultPlantingDistance">-</td>
                                        </tr>
                                        <tr>
                                            <th>Jumlah Lubang Tanam</th>
                                            <td id="resultHoleCount">-</td>
                                        </tr>
                                        <tr>
                                            <th>Jumlah Benih Dibutuhkan</th>
                                            <td id="resultSeedCount">-</td>
                                        </tr>
                                        <tr>
                                            <th>Berat Benih Dibutuhkan</th>
                                            <td id="resultSeedWeight">-</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <div class="info-card">
                                    <h5><i class="fas fa-info-circle me-2"></i>Catatan</h5>
                                    <p id="seedResultNote">Perhitungan ini adalah estimasi. Tambahkan 10-15% sebagai cadangan untuk antisipasi benih yang tidak tumbuh atau rusak.</p>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- KALKULATOR PUPUK -->
                    <div class="tab-pane fade" id="fertilizer" role="tabpanel" aria-labelledby="fertilizer-tab">
                        <div class="calculator-section">
                            <h3>Kalkulator Kebutuhan Pupuk</h3>
                            <p>Hitung kebutuhan pupuk berdasarkan luas lahan dan jenis tanah Anda.</p>
                            
                            <form id="fertilizerCalculatorForm">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="landAreaFert" class="form-label">Luas Lahan (m²)</label>
                                        <input type="number" class="form-control" id="landAreaFert" min="1" required>
                                        <div class="form-text">Masukkan luas lahan dalam meter persegi</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="landAreaUnitFert" class="form-label">Satuan Luas</label>
                                        <select class="form-select" id="landAreaUnitFert">
                                            <option value="m2">Meter Persegi (m²)</option>
                                            <option value="ha">Hektar (ha)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="soilType" class="form-label">Jenis Tanah</label>
                                        <select class="form-select" id="soilType">
                                            <option value="rendah">Tanah Miskin Hara</option>
                                            <option value="sedang" selected>Tanah Sedang</option>
                                            <option value="tinggi">Tanah Subur</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="plantingPhase" class="form-label">Fase Pertumbuhan</label>
                                        <select class="form-select" id="plantingPhase">
                                            <option value="dasar">Pemupukan Dasar (0 HST)</option>
                                            <option value="vegetatif">Fase Vegetatif (15-30 HST)</option>
                                            <option value="generatif">Fase Generatif (45-60 HST)</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-success" id="calculateFertilizerBtn">
                                        <i class="fas fa-calculator me-2"></i>Hitung Kebutuhan Pupuk
                                    </button>
                                </div>
                            </form>
                            
                            <div class="result-card" id="fertilizerResult">
                                <h4>Hasil Perhitungan Kebutuhan Pupuk</h4>
                                <table class="table result-table">
                                    <thead>
                                        <tr>
                                            <th>Jenis Pupuk</th>
                                            <th>Kebutuhan (kg)</th>
                                            <th>Dosis per Hektar (kg/ha)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Urea</td>
                                            <td id="resultUrea">-</td>
                                            <td id="resultUreaHa">-</td>
                                        </tr>
                                        <tr>
                                            <td>SP-36</td>
                                            <td id="resultSP36">-</td>
                                            <td id="resultSP36Ha">-</td>
                                        </tr>
                                        <tr>
                                            <td>KCl</td>
                                            <td id="resultKCl">-</td>
                                            <td id="resultKClHa">-</td>
                                        </tr>
                                        <tr>
                                            <td>Pupuk Organik</td>
                                            <td id="resultOrganic">-</td>
                                            <td id="resultOrganicHa">-</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <div class="info-card">
                                    <h5><i class="fas fa-info-circle me-2"></i>Rekomendasi Aplikasi</h5>
                                    <p id="fertilizerResultNote">Aplikasikan pupuk dengan cara dibenamkan di samping tanaman dengan jarak sekitar 5-7 cm dari pangkal batang dan kedalaman 5-10 cm.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                    <a href="/" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-2"></i>Kembali ke Menu
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card notification-section">
            <div class="card-header bg-warning text-dark">
                <h3 class="mb-0"><i class="fas fa-bell me-2"></i>Pengingat Budidaya</h3>
            </div>
            <div class="card-body">
                <p>Kelola pengingat untuk kegiatan budidaya jagung Anda. Data disimpan di perangkat Anda.</p>
                
                <form id="notificationForm" class="mb-3">
                    <div class="mb-3">
                        <label for="activityType" class="form-label">Jenis Kegiatan</label>
                        <select class="form-select" id="activityType" required>
                            <option value="" selected disabled>Pilih Jenis Kegiatan</option>
                            <option value="pemupukan">Pemupukan</option>
                            <option value="penyemprotan">Penyemprotan Pestisida</option>
                            <option value="pengairan">Pengairan</option>
                            <option value="penyiangan">Penyiangan Gulma</option>
                            <option value="panen">Panen</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="notificationDate" class="form-label">Tanggal Kegiatan</label>
                        <input type="date" class="form-control" id="notificationDate" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="notificationNotes" class="form-label">Catatan (opsional)</label>
                        <textarea class="form-control" id="notificationNotes" rows="2"></textarea>
                    </div>
                    
                    <div class="d-grid">
                        <button type="button" class="btn btn-warning" id="addNotificationBtn">
                            <i class="fas fa-plus me-2"></i>Tambah Pengingat
                        </button>
                    </div>
                </form>
                
                <div class="notification-card">
                    <h5><i class="fas fa-list me-2"></i>Daftar Pengingat</h5>
                    <div id="notificationsContainer">
                        <p id="emptyNotification" class="text-center text-muted">Belum ada pengingat yang ditambahkan</p>
                        <!-- Notification items will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
